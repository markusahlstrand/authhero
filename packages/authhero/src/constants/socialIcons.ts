/**
 * SVG icons for social login providers as data URIs
 *
 * These match the inline SVGs used in the strategy files and provide
 * consistent branding across both old /u and new /u2 login routes.
 */

// Google - Multi-color logo
const GOOGLE_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M44.1035 23.0123C44.1054 21.4791 43.9758 19.9486 43.716 18.4375H22.498V27.1028H34.6507C34.4021 28.4868 33.8757 29.8061 33.1034 30.9812C32.3311 32.1562 31.3289 33.1628 30.1571 33.9401V39.5649H37.41C41.6567 35.6494 44.1035 29.859 44.1035 23.0123Z" fill="#4285F4"/><path d="M22.4982 44.9997C28.5698 44.9997 33.6821 43.0061 37.4101 39.5687L30.1573 33.9439C28.1386 35.3126 25.5387 36.0938 22.4982 36.0938C16.6296 36.0938 11.6485 32.1377 9.86736 26.8066H2.39575V32.6033C4.26839 36.3297 7.13989 39.4622 10.6896 41.6512C14.2394 43.8402 18.3277 44.9995 22.4982 44.9997Z" fill="#34A853"/><path d="M9.86737 26.8073C8.92572 24.0138 8.92572 20.9886 9.86737 18.1951V12.3984H2.39576C0.820432 15.5332 0 18.9929 0 22.5012C0 26.0095 0.820432 29.4692 2.39576 32.604L9.86737 26.8073Z" fill="#FBBC04"/><path d="M22.4982 8.90741C25.7068 8.85499 28.8071 10.0673 31.1291 12.2823L37.5507 5.86064C33.4788 2.03602 28.0843 -0.0637686 22.4982 0.00147616C18.3277 0.00166623 14.2394 1.16098 10.6896 3.34999C7.13989 5.539 4.26839 8.67155 2.39575 12.3979L9.86736 18.1946C11.6485 12.8635 16.6296 8.90741 22.4982 8.90741Z" fill="#EA4335"/></svg>`;

// Apple - Black logo on white background
const APPLE_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M45 0H0V45H45V0Z" fill="white"/><path d="M23.5344 10.3846C25.5313 10.3846 28.0344 9.01144 29.525 7.18055C30.875 5.5213 31.8594 3.20407 31.8594 0.886839C31.8594 0.572154 31.8313 0.25747 31.775 0C29.5531 0.0858233 26.8813 1.51621 25.2781 3.43293C24.0125 4.89193 22.8594 7.18055 22.8594 9.52638C22.8594 9.86968 22.9156 10.213 22.9438 10.3274C23.0844 10.356 23.3094 10.3846 23.5344 10.3846ZM16.5031 45C19.2313 45 20.4406 43.1405 23.8438 43.1405C27.3031 43.1405 28.0625 44.9428 31.1 44.9428C34.0813 44.9428 36.0781 42.1392 37.9625 39.3929C40.0719 36.246 40.9438 33.1564 41 33.0134C40.8031 32.9561 35.0938 30.5817 35.0938 23.9161C35.0938 18.1373 39.5938 15.534 39.8469 15.3338C36.8656 10.9854 32.3375 10.8709 31.1 10.8709C27.7531 10.8709 25.025 12.9307 23.3094 12.9307C21.4531 12.9307 19.0063 10.9854 16.1094 10.9854C10.5969 10.9854 5 15.6198 5 24.3738C5 29.8093 7.08125 35.5594 9.64063 39.2784C11.8344 42.4253 13.7469 45 16.5031 45Z" fill="black"/></svg>`;

// Facebook - Blue logo
const FACEBOOK_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M45 22.5C45 10.0736 34.9264 0 22.5 0C10.0736 0 0 10.0736 0 22.5C0 33.7031 8.23242 42.9785 19.0039 44.6953V28.9746H13.2861V22.5H19.0039V17.5391C19.0039 11.8945 22.3828 8.75977 27.5391 8.75977C29.9658 8.75977 32.5049 9.19922 32.5049 9.19922V14.7656H29.7012C26.9414 14.7656 26.0156 16.4824 26.0156 18.2432V22.5H32.2412L31.2012 28.9746H26.0156V44.6953C36.7871 42.9785 45 33.7031 45 22.5Z" fill="#1877F2"/><path d="M31.2012 28.9746L32.2412 22.5H26.0156V18.2432C26.0156 16.4824 26.9414 14.7656 29.7012 14.7656H32.5049V9.19922C32.5049 9.19922 29.9658 8.75977 27.5391 8.75977C22.3828 8.75977 19.0039 11.8945 19.0039 17.5391V22.5H13.2861V28.9746H19.0039V44.6953C20.1562 44.8984 21.3203 45 22.5 45C23.6797 45 24.8438 44.8984 26.0156 44.6953V28.9746H31.2012Z" fill="white"/></svg>`;

// GitHub - Uses currentColor for theme support
const GITHUB_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 0C10.074 0 0 10.335 0 23.077C0 33.266 6.444 41.895 15.39 44.955C16.515 45.165 16.935 44.46 16.935 43.857C16.935 43.32 16.92 41.865 16.905 39.99C10.65 41.355 9.33 36.99 9.33 36.99C8.31 34.32 6.825 33.615 6.825 33.615C4.77 32.205 6.975 32.235 6.975 32.235C9.24 32.385 10.425 34.59 10.425 34.59C12.45 38.13 15.75 37.125 17.01 36.555C17.22 35.07 17.82 34.065 18.48 33.51C13.455 32.94 8.19 30.93 8.19 22.035C8.19 19.5 9.075 17.43 10.47 15.81C10.23 15.24 9.435 12.87 10.695 9.66C10.695 9.66 12.585 9.045 16.875 12.06C18.675 11.565 20.595 11.31 22.5 11.31C24.405 11.31 26.325 11.565 28.125 12.06C32.415 9.045 34.305 9.66 34.305 9.66C35.565 12.87 34.77 15.24 34.53 15.81C35.925 17.43 36.81 19.5 36.81 22.035C36.81 30.96 31.53 32.925 26.49 33.48C27.33 34.2 28.095 35.625 28.095 37.815C28.095 40.95 28.065 43.47 28.065 43.857C28.065 44.46 28.485 45.18 29.625 44.955C38.571 41.88 45 33.252 45 23.077C45 10.335 34.926 0 22.5 0Z" fill="#181717"/></svg>`;

// Microsoft - Four-color logo
const MICROSOFT_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path fill="#F25022" d="M0 0H21.43V21.43H0V0Z"/><path fill="#7FBA00" d="M23.57 0H45V21.43H23.57V0Z"/><path fill="#00A4EF" d="M0 23.57H21.43V45H0V23.57Z"/><path fill="#FFB900" d="M23.57 23.57H45V45H23.57V23.57Z"/></svg>`;

// Vipps - Orange logo with white text
const VIPPS_SVG = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="45" height="45"><path fill="#FF5B24" d="M3.5,8h41c1.9,0,3.5,1.6,3.5,3.5v25c0,1.9-1.6,3.5-3.5,3.5h-41C1.6,40,0,38.4,0,36.5v-25C0,9.6,1.6,8,3.5,8z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M27.9,20.3c1.4,0,2.6-1,2.6-2.5h0c0-1.5-1.2-2.5-2.6-2.5c-1.4,0-2.6,1-2.6,2.5C25.3,19.2,26.5,20.3,27.9,20.3z M31.2,24.4c-1.7,2.2-3.5,3.8-6.7,3.8h0c-3.2,0-5.8-2-7.7-4.8c-0.8-1.2-2-1.4-2.9-0.8c-0.8,0.6-1,1.8-0.3,2.9 c2.7,4.1,6.5,6.6,10.9,6.6c4,0,7.2-2,9.6-5.2c0.9-1.2,0.9-2.5,0-3.1C33.3,22.9,32.1,23.2,31.2,24.4z"/></svg>`;

// LinkedIn - Blue logo
const LINKEDIN_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M41.7857 0H3.21429C1.4375 0 0 1.4375 0 3.21429V41.7857C0 43.5625 1.4375 45 3.21429 45H41.7857C43.5625 45 45 43.5625 45 41.7857V3.21429C45 1.4375 43.5625 0 41.7857 0ZM13.5402 38.3571H6.83036V16.9152H13.5402V38.3571ZM10.1853 14.0179C8.02679 14.0179 6.28125 12.2723 6.28125 10.1138C6.28125 7.95536 8.02679 6.20982 10.1853 6.20982C12.3438 6.20982 14.0893 7.95536 14.0893 10.1138C14.0893 12.2723 12.3438 14.0179 10.1853 14.0179ZM38.3571 38.3571H31.6473V27.9018C31.6473 25.3571 31.5982 22.0714 28.1027 22.0714C24.5536 22.0714 24.0045 24.8571 24.0045 27.7018V38.3571H17.2946V16.9152H23.7857V19.8116H23.8839C24.7768 18.1339 26.9911 16.3661 30.2679 16.3661C37.0536 16.3661 38.3571 20.8125 38.3571 26.5536V38.3571Z" fill="#0A66C2"/></svg>`;

// Twitter/X - Black logo
const TWITTER_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M26.7857 19.0714L43.5 0H39.5357L25.0714 16.5357L13.5 0H0L17.5714 25L0 45H4L19.2857 27.5357L31.5 45H45L26.7857 19.0714ZM21.2143 25.1786L19.5 22.6429L5.35714 2.89286H11.6786L22.7857 18.9286L24.5 21.4643L39.5357 42.2143H33.2143L21.2143 25.1786Z" fill="#000000"/></svg>`;

// OpenID Connect - Generic logo
const OIDC_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M22.5 0C10.074 0 0 10.074 0 22.5S10.074 45 22.5 45 45 34.926 45 22.5 34.926 0 22.5 0zm0 40.5c-9.941 0-18-8.059-18-18s8.059-18 18-18 18 8.059 18 18-8.059 18-18 18z" fill="#F7931E"/><path d="M22.5 9c-7.456 0-13.5 6.044-13.5 13.5S15.044 36 22.5 36 36 29.956 36 22.5 29.956 9 22.5 9zm0 22.5c-4.971 0-9-4.029-9-9s4.029-9 9-9 9 4.029 9 9-4.029 9-9 9z" fill="#F7931E"/></svg>`;

// OAuth2 - Generic key/lock icon
const OAUTH2_SVG = `<svg width="45" height="45" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg"><path d="M22.5 0C14.492 0 8 6.492 8 14.5V18H5v22h35V18h-3v-3.5C37 6.492 30.508 0 22.5 0zm0 4c5.799 0 10.5 4.701 10.5 10.5V18h-21v-3.5C12 8.701 16.701 4 22.5 4z" fill="#6B7280"/><circle cx="22.5" cy="29" r="3" fill="#6B7280"/></svg>`;

/**
 * Convert SVG string to data URI for use in img src
 */
function svgToDataUri(svg: string): string {
  const encoded = encodeURIComponent(svg)
    .replace(/'/g, "%27")
    .replace(/"/g, "%22");
  return `data:image/svg+xml,${encoded}`;
}

/**
 * Default icon data URIs for known social strategies
 */
export const DEFAULT_STRATEGY_ICONS: Record<string, string> = {
  "google-oauth2": svgToDataUri(GOOGLE_SVG),
  google: svgToDataUri(GOOGLE_SVG),
  apple: svgToDataUri(APPLE_SVG),
  facebook: svgToDataUri(FACEBOOK_SVG),
  github: svgToDataUri(GITHUB_SVG),
  microsoft: svgToDataUri(MICROSOFT_SVG),
  windowslive: svgToDataUri(MICROSOFT_SVG),
  vipps: svgToDataUri(VIPPS_SVG),
  linkedin: svgToDataUri(LINKEDIN_SVG),
  twitter: svgToDataUri(TWITTER_SVG),
  oidc: svgToDataUri(OIDC_SVG),
  oauth2: svgToDataUri(OAUTH2_SVG),
};

/**
 * Get the icon URL for a connection, falling back to strategy defaults
 */
export function getConnectionIconUrl(connection: {
  strategy: string;
  options?: { icon_url?: string };
}): string | undefined {
  // First, check for custom icon_url in connection options
  if (connection.options?.icon_url) {
    return connection.options.icon_url;
  }
  // Fall back to default strategy icons
  return DEFAULT_STRATEGY_ICONS[connection.strategy];
}
