{
  "name": "Password Reset Flow",
  "description": "Tests the forgot password and reset flow",
  "steps": [
    {
      "id": "initial",
      "screen": "login",
      "fixture": "login.json",
      "description": "User on login page"
    },
    {
      "id": "forgot-password",
      "screen": "forgot-password",
      "fixture": "forgot-password.json",
      "trigger": {
        "action": "click",
        "element": "forgot-password-link"
      },
      "description": "User clicks forgot password link"
    },
    {
      "id": "email-sent",
      "screen": "forgot-password",
      "fixture": "forgot-password.json",
      "messages": {
        "success": "If an account exists for user@example.com, you will receive a password reset email."
      },
      "trigger": {
        "action": "submit",
        "data": {
          "email": "user@example.com"
        }
      },
      "description": "User submits email, sees confirmation"
    },
    {
      "id": "reset-password",
      "screen": "reset-password",
      "fixture": "reset-password.json",
      "trigger": {
        "action": "external",
        "description": "User clicks link in email"
      },
      "description": "User arrives from email link"
    },
    {
      "id": "password-mismatch",
      "screen": "reset-password",
      "fixture": "reset-password.json",
      "nodeOverrides": {
        "password_confirm": {
          "messages": {
            "error": "Passwords do not match"
          }
        }
      },
      "trigger": {
        "action": "submit",
        "data": {
          "password": "newpassword123",
          "password_confirm": "differentpassword"
        }
      },
      "description": "User enters mismatched passwords"
    },
    {
      "id": "success",
      "screen": "success",
      "fixture": "success.json",
      "messages": {
        "success": "Your password has been reset. You can now sign in with your new password."
      },
      "trigger": {
        "action": "submit",
        "data": {
          "password": "newpassword123",
          "password_confirm": "newpassword123"
        }
      },
      "description": "User successfully resets password"
    }
  ]
}
