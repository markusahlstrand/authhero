import{j as z}from"./jsx-runtime-BjG_zV1W.js";import{j as o,c as w,A as Pr,H as F,r as $}from"./AppLogo-gHPKz47t.js";import{i as v}from"./iframe-CdLQJ8ce.js";import{C as Sr,a as jr,b as Dr,c as Hr,d as Lr,B as Rr}from"./button-D6b_BsBQ.js";import{u as cr,a as Vr,b as Br,T as Cr}from"./Trans-DadTjdpm.js";import{L as Ir}from"./label-CL6wCMJg.js";import{E as zr}from"./ErrorMessage-C_2KfqNY.js";import"./preload-helper-C1FmrZbK.js";const mr=({maxLength:a,value:r="",onChange:e,onComplete:f,disabled:L=!1,className:R,containerClassName:V,pattern:g,name:b,id:_,required:W,autoFocus:P})=>{const[k,y]=cr(r),[B,u]=cr(P?0:-1),c=Vr([]);Br(()=>{y(r)},[r]);const S=(s,t)=>{var d;const n=t.slice(-1);if(g&&!g.test(n))return;const l=k.split("");l[s]=n;const i=l.join("").slice(0,a);y(i),e==null||e(i),n&&s<a-1&&c.current&&(u(s+1),(d=c.current[s+1])==null||d.focus()),i.length===a&&(f==null||f(i))},j=(s,t)=>{var n,l,i;if(t.key==="Backspace"){const d=k.split("");d[s]?d[s]="":s>0&&(d[s-1]="",u(s-1),c.current&&((n=c.current[s-1])==null||n.focus()));const p=d.join("");y(p),e==null||e(p)}else t.key==="ArrowLeft"&&s>0?(u(s-1),c.current&&((l=c.current[s-1])==null||l.focus())):t.key==="ArrowRight"&&s<a-1&&(u(s+1),c.current&&((i=c.current[s+1])==null||i.focus()))},C=s=>{var d,p;s.preventDefault();const t=((d=s.clipboardData)==null?void 0:d.getData("text"))||"";let n=t;g&&(n=t.split("").filter(N=>g.test(N)).join(""));const l=n.slice(0,a);y(l),e==null||e(l);const i=Math.min(l.length,a-1);u(i),c.current&&((p=c.current[i])==null||p.focus()),l.length===a&&(f==null||f(l))};return o("div",{className:w("flex items-center gap-2 has-[:disabled]:opacity-50",V),"data-input-otp-container":"",children:Array.from({length:a}).map((s,t)=>o("input",{ref:n=>{c.current&&(c.current[t]=n)},type:"text",inputMode:"numeric",maxLength:1,value:k[t]||"",onChange:n=>{const l=n.target;S(t,l.value)},onKeyDown:n=>j(t,n),onPaste:t===0?C:void 0,onFocus:()=>u(t),onBlur:()=>u(-1),disabled:L,name:t===0?b:void 0,id:t===0?_:void 0,required:t===0?W:void 0,autoFocus:t===0?P:void 0,className:w("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md text-center font-mono",B===t&&"z-10 ring-1 ring-ring","disabled:cursor-not-allowed disabled:opacity-50",R),"data-input-otp-slot":t},t))})};mr.__docgenInfo={description:"",methods:[],displayName:"InputOTP",props:{value:{defaultValue:{value:'""',computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};const ir=6,E=({error:a,theme:r,branding:e,email:f,state:L,client:R,hasPasswordLogin:V,className:g,onCodeChange:b,onSubmit:_})=>{var T,M,O,q,J,X,K,U,G,Q,Y,Z,h,rr,or,sr,tr,ar,er,nr,lr;const P=R.connections.map(({name:x})=>x).includes("auth2"),k=new URLSearchParams({state:L}),y=((T=r==null?void 0:r.colors)==null?void 0:T.primary_button)||((M=e==null?void 0:e.colors)==null?void 0:M.primary)||"#0066cc",B=((O=r==null?void 0:r.colors)==null?void 0:O.primary_button_label)||"#ffffff",u=((q=r==null?void 0:r.colors)==null?void 0:q.body_text)||"#333333",c=((J=r==null?void 0:r.colors)==null?void 0:J.input_border)||"#d1d5db",S=((X=r==null?void 0:r.colors)==null?void 0:X.widget_background)||"#ffffff",j=((K=r==null?void 0:r.colors)==null?void 0:K.widget_border)||"#e5e7eb",C=((U=r==null?void 0:r.borders)==null?void 0:U.widget_corner_radius)||8,s=((G=r==null?void 0:r.borders)==null?void 0:G.button_border_radius)||4,t=((Q=r==null?void 0:r.borders)==null?void 0:Q.show_widget_shadow)??!0,n=((Z=(Y=r==null?void 0:r.fonts)==null?void 0:Y.title)==null?void 0:Z.size)||24,l=((rr=(h=r==null?void 0:r.fonts)==null?void 0:h.title)==null?void 0:rr.bold)??!0,i=((sr=(or=r==null?void 0:r.fonts)==null?void 0:or.body_text)==null?void 0:sr.size)||14,d={backgroundColor:S,borderColor:j,borderRadius:`${C}px`,boxShadow:t?"0 1px 3px 0 rgba(0, 0, 0, 0.1)":"none",color:u},p={fontSize:`${n}px`,fontWeight:l?"700":"400",color:((tr=r==null?void 0:r.colors)==null?void 0:tr.header)||u},N={fontSize:`${i}px`,color:((ar=r==null?void 0:r.colors)==null?void 0:ar.input_labels_placeholders)||"#6b7280"},A={backgroundColor:y,color:B,borderRadius:`${s}px`},_r={backgroundColor:((er=r==null?void 0:r.colors)==null?void 0:er.base_hover_color)||"#0052a3"},I=((nr=r==null?void 0:r.widget)==null?void 0:nr.logo_position)||"center",kr=I==="left"?"text-left":I==="right"?"text-right":"text-center",Nr=((lr=r==null?void 0:r.widget)==null?void 0:lr.logo_url)||(e==null?void 0:e.logo_url),xr=I!=="none"&&Nr,Er=x=>{b==null||b(x),x.length===ir&&(_==null||_(x))};return o("div",{className:w("flex flex-col gap-6 w-full max-w-sm",g),children:o(Sr,{style:d,className:"border",children:[o(jr,{children:[xr&&o("div",{className:w("mb-4",kr),children:o(Pr,{theme:r,branding:e})}),o(Dr,{style:p,children:v.t("verify_your_email","Verify your email")}),o(Hr,{style:N,children:o(Cr,{i18nKey:"code_sent_template",components:[o("span",{className:"font-medium"},"span")],values:{username:f}})})]}),o(Lr,{children:o("form",{method:"post",children:o("div",{className:"grid gap-6",children:[o("div",{className:"grid gap-4",children:[o(Ir,{htmlFor:"code",style:N,children:v.t("verification_code","Verification Code")}),o("div",{className:"flex justify-center",children:o(mr,{maxLength:ir,name:"code",id:"code",required:!0,autoFocus:!0,pattern:/^[0-9]*$/,onComplete:Er,onChange:b,containerClassName:"gap-2",className:w("w-12 h-12 text-center text-lg font-mono border rounded-md transition-colors",a?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500")})}),a&&o(zr,{children:a})]}),o(Rr,{type:"submit",className:"w-full transition-colors",style:A,onmouseover:`this.style.backgroundColor='${_r.backgroundColor}'`,onmouseout:`this.style.backgroundColor='${A.backgroundColor}'`,children:v.t("login","Login")}),o("div",{className:"text-center text-xs text-gray-500",children:o("div",{className:"flex items-center justify-center gap-1",children:[o("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),o("span",{children:v.t("sent_code_spam","Check your spam folder if you don't see the code")})]})}),P&&o("div",{className:"text-center",children:[o("div",{className:"relative mb-5 block text-center",style:N,children:[o("div",{className:"absolute left-0 right-0 top-1/2 border-b",style:{borderColor:j}}),o("div",{className:"relative inline-block px-2",style:{backgroundColor:S},children:v.t("or","Or")})]}),o("a",{href:`/u/${V?"enter-password":"pre-signup"}?${k.toString()}`,className:w("w-full inline-flex items-center justify-center gap-2 rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","border border-gray-300 bg-transparent hover:bg-gray-100 dark:border-gray-600 dark:hover:bg-gray-800","h-10 px-4 py-2"),style:{borderColor:c,borderRadius:`${s}px`,color:u},children:v.t("enter_your_password_btn","Enter your password instead")})]})]})})})]})})};E.__docgenInfo={description:"",methods:[],displayName:"EnterCodeForm"};const Xr={title:"Components/EnterCodeForm",component:E,parameters:{layout:"centered"},tags:["autodocs"]},Fr={connections:[{name:"email",strategy:"email"},{name:"auth2",strategy:"Username-Password-Authentication"}]},m={args:{email:"user@example.com",state:"mock-state-123",client:Fr,hasPasswordLogin:!1,theme:null,branding:null},render:a=>z.jsx(F,{html:$(E,a)})},D={args:{...m.args,error:"Invalid verification code. Please try again."},render:a=>z.jsx(F,{html:$(E,a)})},H={args:{...m.args,hasPasswordLogin:!0},render:a=>z.jsx(F,{html:$(E,a)})};var dr,ur,fr;m.parameters={...m.parameters,docs:{...(dr=m.parameters)==null?void 0:dr.docs,source:{originalSource:`{
  args: {
    email: "user@example.com",
    state: "mock-state-123",
    client: mockClient,
    hasPasswordLogin: false,
    theme: null,
    branding: null
  },
  render: args => <HonoJSXWrapper html={renderHonoComponent(EnterCodeForm, args)} />
}`,...(fr=(ur=m.parameters)==null?void 0:ur.docs)==null?void 0:fr.source}}};var pr,gr,br;D.parameters={...D.parameters,docs:{...(pr=D.parameters)==null?void 0:pr.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    error: "Invalid verification code. Please try again."
  },
  render: args => <HonoJSXWrapper html={renderHonoComponent(EnterCodeForm, args)} />
}`,...(br=(gr=D.parameters)==null?void 0:gr.docs)==null?void 0:br.source}}};var yr,vr,wr;H.parameters={...H.parameters,docs:{...(yr=H.parameters)==null?void 0:yr.docs,source:{originalSource:`{
  args: {
    ...Default.args,
    hasPasswordLogin: true
  },
  render: args => <HonoJSXWrapper html={renderHonoComponent(EnterCodeForm, args)} />
}`,...(wr=(vr=H.parameters)==null?void 0:vr.docs)==null?void 0:wr.source}}};const Kr=["Default","WithError","WithPasswordLogin"];export{m as Default,D as WithError,H as WithPasswordLogin,Kr as __namedExportsOrder,Xr as default};
